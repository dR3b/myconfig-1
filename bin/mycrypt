#!/bin/bash
# ~/bin/mycrypt
# a simple script to en/decrypt files using des3 and openssl

# Last modified: So Jul 28, 2013  10:58

if [[ $# -eq 1 ]]; then
  if [[ -f "$1" ]]; then
    openssl des3 -d -salt -in "$1"
    exit;
  fi
else
  FNAME=$2
  if [[ -f "$FNAME" ]]; then
    case $1 in
      'e')
        openssl des3 -salt -in "$FNAME" -out "$FNAME.des3"
        exit;
        ;;
      'd')
        openssl des3 -d -salt -in "$FNAME" -out "${FNAME%.[^.]*}"
        exit;
        ;;
    esac
  fi
fi

echo "mycrypt [e,d] <name of file>"
echo " a simple script to en/decrypt files using des3 and openssl"
echo
echo " mycrypt <name of encrypted file>:     decrypt the file.des3 to stdout"
echo " mycrypt d <name of encrypted file>:   decrypt the file.des3 to file"
echo " mycrypt e <name of file>:             encrypt the file to file.des3"
